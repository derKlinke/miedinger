name: Dispatch format sync

on:
    release:
        types: [published]
    workflow_dispatch:

permissions:
    contents: read

jobs:
    dispatch:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout
              uses: actions/checkout@v4

            - name: Dispatch sync to installed repos
              env:
                  MIEDINGER_APP_ID: ${{ secrets.MIEDINGER_APP_ID }}
                  MIEDINGER_APP_PRIVATE_KEY: ${{ secrets.MIEDINGER_APP_PRIVATE_KEY }}
              run: node scripts/dispatch-sync.js
